<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.ohpizza.mapper.BoardMapper">

	<select id="boardList" resultType="co.ohpizza.vo.BoardVO">
		select b.*
		from (select rownum rn, a.*
		from (select *
		from tbl_board
		order by board_no desc ) a ) b
		where b.rn > (#{page} - 1) * 5
    <![CDATA[
    and   b.rn <= (#{page} * 5)	    
    ]]>
	</select>

	<select id="inquiryList" resultType="co.ohpizza.vo.BoardVO">
		select board_title,
		board_view,
		complaint,
		answer,
		trunc(board_date, 'Day'),
		mem_id
		from tbl_board
		where mem_id = #{memId}
	</select>

	<select id="totalPage" resultType="int">
		select count(1)
		from tbl_board
	</select>

	<select id="boardDetail" resultType="co.ohpizza.vo.BoardVO">
		select *
		from tbl_board
		where
		board_no = #{bno}
	</select>
	
	<insert id="insertViewBoard" parameterType="co.ohpizza.vo.BoardVO">
		insert into tbl_board (board_no, BOARD_TITLE, review, mem_id)
		VALUES                (BOARD_SEQ.nextval, #{boardTitle}, #{review}, #{memId})
	</insert>

</mapper>